(function(){function s(d,f,g){q=[];for(var b=0;9>b;b++){var e=t[b],e=e[0]*d+e[1]*f;q.push(t[b][2]*g*(1+3*e+4.5*e*e-1.5*(d*d+f*f)))}}var l=[],d,f,k,q=[],v=4/9,n=1/9,r=1/36;with(Math)S=sqrt,P=pow,F=floor;var p=F(a.width/100);a.width=a.height=100*p;var t=[[0,0,v],[1,0,n],[0,-1,n],[-1,0,n],[0,1,n],[1,-1,r],[-1,-1,r],[-1,1,r],[1,1,r]];for(d=0;1E4>d;d++)k=F(d/100),f=d%100,0==k&&(l[f]=[]),l[f][k]={a:[],b:[],c:1,x:0,y:0},s(0,0,1),l[f][k].b=q.slice(0),l[f][k].a=q.slice(0);a.onmousemove=function(d){var f=F(d.layerX/
p);d=F(d.layerY/p);for(var g=-25;25>=g;g++){var b=l[f+F(g/5)][d+F(g%5)];s(0.1,0.1,b.c);b.a=q}};(function u(){for(d=0;1E4>d;d++){k=F(d/100);f=d%100;for(var g=l[f][k],b=0;9>b;b++){var e=t[b],h=e[0]+f,e=e[1]+k;0<=h&&100>h&&0<=e&&100>e&&(l[h][e].b[b]=g.a[b])}}for(d=0;1E4>d;d++){k=F(d/100);f=d%100;var g=l[f][k],b=g.a,b=g.b.slice(0),m=b[1]+b[5]+b[8],e=b[4]+b[7]+b[8],h=b[0]+b[2]+b[3]+b[6]+m+e-b[8],m=(m-b[3]-b[6]-b[7])/h,e=(e-b[2]-b[5]-b[6])/h;g.c=h;g.x=m;g.y=e;s(m,e,h);for(h=0;9>h;h++)e=b[h],g.a[h]=e+1.7*
(q[h]-e)}g=c.createImageData(a.width,a.height);b=g.data;for(d=0;1E4>d;d++)for(k=F(d/100),f=d%100,h=S(P(l[f][k].x,2)+P(l[f][k].y,2)),e=k*p;e<(k+1)*p;e++)for(m=f*p;m<(f+1)*p;m++){var n=4*(m+e*g.width);b[n+1]=255;b[n+3]=F(4E3*h)}c.putImageData(g,0,0);setInterval(u,10)})()})();
X='slice'
function u(h,f,k){q=[];for(var e=0;9>e;e++){var g=s[X](4*e,4*e+2)*h+s[X](4*e+2,4*e+4)*f;r=e?5>e?1/9:1/36:4/9;q[e]=r*k*(1+3*g+4.5*g*g-1.5*(h*h+f*f))}}with(Math)S=sqrt,P=pow,F=floor;var Z='width',Y=100,m=[],k,h,f,q=[],v=1,r,s=" 0 0 1 0 0-1-1 0 0 1 1-1-1-1-1 1 1 1",n=F(a[Z]/Y);a[Z]=a.height=Y*n;a.onmousemove=function(h){for(var f=-25;26>f;f++){var k=m[F(h.layerX/n+f/5)][F(h.layerY/n)+f%5];u(.1,.1,k.c);k.a=q}};(function w(){var p=c.createImageData(a[Z],a.height),e=p.data;for(k=0;1E4>
k;k++){f=F(k/Y);h=k%Y;v&&(0==f&&(m[h]=[]),m[h][f]={b:[],a:[],c:1,x:0,y:0},u(0,0,1),m[h][f].a=q);var g=m[h][f],d=g.b,d=g.a[X](0),l=d[1]+d[5]+d[8],r=d[3]+d[6]+d[7],t=l+r+d[0]+d[2]+d[4];g.x=(l-r)/t;g.y=(d[4]+d[7]+d[8]-d[2]-d[5]-d[6])/t;g.c=t;u(g.x,g.y,t);for(l=0;9>l;l++)g.b[l]=d[l]+1.7*(q[l]-d[l]);for(g=f*n;g<(f+1)*n;g++)for(d=h*n;d<(h+1)*n;d++)l=4*(d+g*p[Z]),e[l+1]=255,e[l+3]=F(4E3*S(P(m[h][f].x,2)+P(m[h][f].y,2)))}c.putImageData(p,0,0);for(k=v=0;1E4>k;k++)for(f=F(k/Y),h=k%Y,p=m[h][f],
e=0;9>e;e++)g=1*s[X](4*e,4*e+2)+h,d=1*s[X](4*e+2,4*e+4)+f,0<=g&&Y>g&&0<=d&&Y>d&&(m[g][d].a[e]=p.b[e]);setTimeout(w)})()
function t(d,e,k){n=[];for(var f=0;9>f;f++){var X='width';Y=80;Z=200;b=v[f],b=b[0]*d+b[1]*e;n.push(z[f]*k*(1+3*b+4.5*b*b-1.5*(d*d+e*e)))}}var l=[],d,e,n=[],A=4/9,q=1/9,r=1/36,u=Math,w=u.sqrt,x=u.pow,s=u.floor,p=s(a[X]/Z),v=[[0,0],[1,0],[0,-1],[-1,0],[0,1],[1,-1],[-1,-1],[-1,1],[1,1]],z=[A,q,q,q,q,r,r,r,r];for(d=0;Z>d;d++)for(l[d]=[],e=0;Y>e;e++)l[d][e]={d:[],s:[],n:1,x:0,y:0},t(0,0,1),l[d][e].b=n.slice(0),l[d][e].a=n.slice(0);a.onmousemove=function(d){var e=s(d.layerX/p); d=s(d.layerY/p);for(var k=-5;5>=k;k++)for(var f=-5;5>=f;f++)if(0<=e+k&&Z>e+k&&0<=d+f&&Y>d+f&&5>w(k*k+f*f)){var b=l[e+k][d+f];t(.1,.1,b.c);b.a=n}};(function y(){for(var k=0;10>k;k++){for(d=0;Z>d;d++)for(e=0;Y>e;e++)for(var f=l[d][e],b=0;9>b;b++){var h=v[b],g=h[0]+d,h=h[1]+e;0<=g&&Z>g&&0<=h&&Y>h&&(l[g][h].b[b]=f.a[b])}for(d=0;Z>d;d++)for(e=0;Y>e;e++){f=l[d][e];b=f.a;for(g=0;9>g;g++)b[g]=f.b[g];var m=b[1]+b[5]+b[8],h=b[4]+b[7]+b[8],g=b[0]+b[2]+b[3]+b[6]+m+h-b[8],m=(m-b[3]-b[6]-b[7])/g, h=(h-b[2]-b[5]-b[6])/g;f.c=g;f.x=m;f.y=h;t(m,h,g);for(g=0;9>g;g++)h=b[g],f.a[g]=h+1.7*(n[g]-h)}}k=c.createImageData(a[X],a.height);f=k.data;for(d=0;Z>d;d++)for(e=0;Y>e;e++)for(b=w(x(l[d][e].x,2)+x(l[d][e].y,2)),g=e*p;g<(e+1)*p;g++)for(h=d*p;h<(d+1)*p;h++)m=4*(h+g*k[X]),f[m+0]=0,f[m+1]=255,f[m+2]=0,f[m+3]=s(4E3*b);c.putImageData(k,0,0);setInterval(y,10)})()
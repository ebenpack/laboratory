(function(){function A(){this.a=[0,0,0,0,0,0,0,0,0];this.b=[0,0,0,0,0,0,0,0,0];this.c=1;this.y=this.x=0}function u(d,g,l){q=[];for(var h=d*d+g*g,b=0;9>b;b++){var f=v[b],f=f[0]*d+f[1]*g;q.push(C[b]*l*(1+3*f+4.5*f*f-1.5*h))}}var m=[],d,g,q=[],D=4/9,p=1/9,r=1/36,w=Math.sqrt,x=Math.pow,s=Math.abs,t=Math.floor,y=0,z=0,n=t(a.width/200),v=[[0,0],[1,0],[0,-1],[-1,0],[0,1],[1,-1],[-1,-1],[-1,1],[1,1]],C=[D,p,p,p,p,r,r,r,r];a.style.background="#000";for(d=0;200>d;d++)for(m[d]=[],g=0;80>g;g++)m[d][g]=new A, u(0,0,1),m[d][g].b=q.slice(0),m[d][g].a=q.slice(0);a.onmousemove=function(d){var g=d.layerX;d=d.layerY;var l=(g-y)/n/10,h=(d-z)/n/10;0.1<s(l)&&(l=0.1*s(l)/l);0.1<s(h)&&(h=0.1*s(h)/h);for(var b=t(g/n),f=t(d/n),e=-5;5>=e;e++)for(var k=-5;5>=k;k++)if(0<=b+e&&200>b+e&&0<=f+k&&80>f+k&&5>w(e*e+k*k)){var p=m[b+e][f+k];u(l,h,p.c);p.a=q}y=g;z=d};(function B(){for(var l=0;10>l;l++){for(d=0;200>d;d++)for(g=0;80>g;g++)for(var h=m[d][g],b=0;9>b;b++){var f=v[b],e=f[0]+d,f=f[1]+g;0<=e&&200>e&&0<=f&&80>f&&(m[e][f].b[b]= h.a[b])}for(d=0;200>d;d++)for(g=0;80>g;g++){h=m[d][g];b=h.a;for(e=0;9>e;e++)b[e]=h.b[e];var k=b[1]+b[5]+b[8],f=b[4]+b[7]+b[8],e=b[0]+b[2]+b[3]+b[6]+k+f-b[8],k=(k-b[3]-b[6]-b[7])/e,f=(f-b[2]-b[5]-b[6])/e;h.c=e;h.x=k;h.y=f;u(k,f,e);for(e=0;9>e;e++)f=b[e],h.a[e]=f+1.7*(q[e]-f)}}l=c.createImageData(a.width,a.height);h=l.data;for(d=0;200>d;d++)for(g=0;80>g;g++)for(b=w(x(m[d][g].x,2)+x(m[d][g].y,2)),e=g*n;e<(g+1)*n;e++)for(f=d*n;f<(d+1)*n;f++)k=4*(f+e*l.width),h[k+0]=0,h[k+1]=255,h[k+2]=0,h[k+3]=t(4E3* b);c.putImageData(l,0,0);requestAnimationFrame(B)})()})();
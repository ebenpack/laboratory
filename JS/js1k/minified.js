(function(){function t(e,f,h){q=[];for(var d=0;9>d;d++){var g=s.slice(4*d,4*d+2)*e+s.slice(4*d+2,4*d+4)*f;r=d?5>r?1/9:1/36:4/9;q[d]=r*h*(1+3*g+4.5*g*g-1.5*(e*e+f*f))}}with(Math)S=sqrt,P=pow,F=floor;var m=[],e,f,l,q=[],u=1,r,s=" 0 0 1 0 0-1-1 0 0 1 1-1-1-1-1 1 1 1",p=F(a.width/100);a.width=a.height=100*p;a.onmousemove=function(e){for(var f=-25;25>=f;f++){var h=m[F(e.layerX/p+f/5)][F(e.layerY/p)+f%5];t(0.1,0.1,h.c);h.a=q}};(function v(){var h=c.createImageData(a.width,a.height),d=h.data;for(e=0;1E4>
e;e++){l=F(e/100);f=e%100;u&&(0==l&&(m[f]=[]),m[f][l]={a:[],b:[],c:1,x:0,y:0},t(0,0,1),m[f][l].b=q.slice(0),m[f][l].a=q.slice(0));for(var g=S(P(m[f][l].x,2)+P(m[f][l].y,2)),k=l*p;k<(l+1)*p;k++)for(var n=f*p;n<(f+1)*p;n++){var r=4*(n+k*h.width);d[r+1]=1E4;d[r+3]=F(4E3*g)}}c.putImageData(h,0,0);for(e=u=0;1E4>e;e++)for(l=F(e/100),f=e%100,h=m[f][l],d=0;9>d;d++)g=1*s.slice(4*d,4*d+2)+f,k=1*s.slice(4*d+2,4*d+4)+l,0<=g&&100>g&&0<=k&&100>k&&(m[g][k].b[d]=h.a[d]);for(e=0;1E4>e;e++)for(h=m[e%100][F(e/100)],
d=h.a,d=h.b.slice(0),k=d[1]+d[5]+d[8],n=d[3]+d[6]+d[7],g=k+n+d[0]+d[2]+d[4],k=(k-n)/g,n=(d[4]+d[7]+d[8]-d[2]-d[5]-d[6])/g,h.c=g,h.x=k,h.y=n,t(k,n,g),g=0;9>g;g++)k=d[g],h.a[g]=k+1.7*(q[g]-k);setInterval(v,10)})()})();
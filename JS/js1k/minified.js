X='slice'
function u(h,f,k){p=[];for(var e=0;9>e;e++){var g=s[X](4*e,4*e+2)*h+s[X](4*e+2,4*e+4)*f;r=e?5>e?1/9:1/36:4/9;p[e]=r*k*(1+3*g+4.5*g*g-1.5*(h*h+f*f))}}with(Math)S=sqrt,P=pow,F=floor;var Z='width',Y=100,m=[],h,f,k,p=[],v=1,r,s=" 0 0 1 0 0-1-1 0 0 1 1-1-1-1-1 1 1 1",n=F(a[Z]/Y);a[Z]=a.height=Y*n;a.onmousemove=function(h){for(var f=-25;26>f;f++){var k=m[F(h.layerX/n+f/5)][F(h.layerY/n)+f%5];u(.1,.1,k.c);k.b=p}};(function w(){var q=c.createImageData(a[Z],a.height),e=q.data;for(h=0;1E4>
h;h++){k=F(h/Y);f=h%Y;v&&(0==k&&(m[f]=[]),m[f][k]={a:[],b:[],c:1,x:0,y:0},u(0,0,1),m[f][k].b=p[X](0),m[f][k].a=p[X](0));var g=m[h%Y][F(h/Y)],d=g.a,d=g.b[X](0),l=d[1]+d[5]+d[8],r=d[3]+d[6]+d[7],t=l+r+d[0]+d[2]+d[4];g.x=(l-r)/t;g.y=(d[4]+d[7]+d[8]-d[2]-d[5]-d[6])/t;g.c=t;u(g.x,g.y,t);for(l=0;9>l;l++)g.a[l]=d[l]+1.7*(p[l]-d[l]);for(g=k*n;g<(k+1)*n;g++)for(d=f*n;d<(f+1)*n;d++)l=4*(d+g*q[Z]),e[l+1]=1E4,e[l+3]=F(4E3*S(P(m[f][k].x,2)+P(m[f][k].y,2)))}c.putImageData(q,0,0);for(h=v=0;1E4>
h;h++)for(k=F(h/Y),f=h%Y,q=m[f][k],e=0;9>e;e++)g=1*s[X](4*e,4*e+2)+f,d=1*s[X](4*e+2,4*e+4)+k,0<=g&&Y>g&&0<=d&&Y>d&&(m[g][d].b[e]=q.a[e]);setTimeout(w)})()